<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycompany.matdongsan.dao.UserCommonDataDao">
	<insert id="insertUserDataByUser" parameterType="UserCommonData">
		<selectKey keyProperty="unumber" resultType="int" order="BEFORE">
			select seq_unumber.nextval from dual
		</selectKey>
		insert into user_email(unumber, uemail, upassword, urole, uremoved)
		values (#{unumber}, #{uemail}, #{upassword}, #{urole}, #{uremoved})
	</insert>
	<select id="getUserIdByUsername" parameterType="String" resultType="int">
		select unumber from user_email where uemail = #{uemail}
	</select>
	
	<select id="selectByUnumber" parameterType="String" resultType="UserCommonData">
		select unumber, uemail, upassword, urole, ujoindate,uremoved
		from user_email
		where uemail = #{uemail}
	</select>
	<select id="getUserDataByUserName" parameterType="String" resultType = "UserCommonData">
		select urole from user_email
		where uemail = #{name}
	</select>
</mapper>